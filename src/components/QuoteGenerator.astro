---
// No server-side logic needed for this interactive piece
---

<div class="flex flex-col items-center justify-center py-20">
  <div id="bust-trigger" class="cursor-pointer transition-transform hover:scale-105">
    <img
      src="https://upload.wikimedia.org/wikipedia/commons/b/b1/Marcus_Aurelius_Louvre_MR453_n01.png"
      class="w-64 drop-shadow-[0_0_20px_#ff00ff] hue-rotate-[280deg]"
      alt="Marcus Aurelius"
    />
  </div>
  <div id="quote-display" class="mt-10 text-center transition-opacity duration-500 max-w-lg">
    <p id="quote-text" class="text-2xl font-bold text-slate-900 leading-snug">
      "Click the Emperor to begin."
    </p>
    <span id="quote-source" class="block mt-4 text-sm uppercase tracking-widest opacity-50"></span>
  </div>
</div>

<script>
  let quotes = [];

  async function loadQuotes() {
    try {
      const res = await fetch('/meditations.json');
      quotes = await res.json();
    } catch (e) {
      console.error("Failed to load meditations.json", e);
    }
  }

  function updateQuote() {
    if (quotes.length === 0) return;
    
    const display = document.getElementById('quote-display');
    const text = document.getElementById('quote-text');
    const source = document.getElementById('quote-source');

    display.style.opacity = '0';

    setTimeout(() => {
      const random = quotes[Math.floor(Math.random() * quotes.length)];
      text.innerText = `"${random.english}"`;
      source.innerText = `â€” Book ${random.book}, Verse ${random.verse}`;
      display.style.opacity = '1';
    }, 400);
  }

  // Initialize
  loadQuotes();
  document.getElementById('bust-trigger').addEventListener('click', updateQuote);
</script>